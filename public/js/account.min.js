"use strict";!function(t,e){t(function(){quiltEdit.init()})}(jQuery,window);var quiltEdit=function(t){function e(){l.length>0&&n()}function n(){l.on("click",i),r.on("click",o),c.on("change",".edit-input",u)}function i(e){e.preventDefault();var n=t(e.currentTarget.getAttribute("data-target"));console.log("TARGET",n),n.toggleClass("edit-mode")}function o(e){e.preventDefault();var n=t(e.currentTarget),i="/quilts/"+n.data("id");d.find(".btn-delete").on("click",a(n,i)),d.modal("show")}function a(e,n){t.ajax(n,{type:"delete",statusCode:{204:function(){e.closest("li").remove()},400:function(){alert("page not found")}}}),d.modal("hide"),d.find(".btn-delete").off("click",a)}function u(e){var n=t(e.currentTarget),i=e.currentTarget.value,o=e.currentTarget.getAttribute("data-id"),a=c.attr("action")+"/"+o,u={title:i};t.ajax(a,{type:"post",data:u,statusCode:{200:function(){n.closest("li").toggleClass("edit-mode"),n.next(".view-link").html(i)},404:function(){alert("page not found")}}})}var c=t("#quilts-form"),l=c.find(".edit-action"),r=c.find(".delete-action"),d=c.find("#delete-modal");return{init:function(){e()},deinit:function(){}}}(jQuery);