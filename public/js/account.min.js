"use strict";!function(t,e){t(function(){quiltEdit.init()})}(jQuery,window);var quiltEdit=function(t){function e(){d.length>0&&(f.material_select(),n())}function n(){d.on("click",a),l.on("click",i),f.on("change",u),c.on("change",".edit-input",o)}function a(e){e.preventDefault();var n=t(e.currentTarget.getAttribute("data-target"));console.log("TARGET",n),n.toggleClass("edit-mode")}function i(e){e.preventDefault();var n=t(e.currentTarget),a=t(e.currentTarget.getAttribute("data-target")),i="/quilts/"+a.data("id");g.find(".btn-delete").on("click",r(n,i)),g.modal("show")}function r(e,n){t.ajax(n,{type:"delete",statusCode:{200:function(){e.closest("li").remove()},400:function(){alert("page not found")}}}),g.modal("hide"),g.find(".btn-delete").off("click",r)}function u(e){e.preventDefault(),console.log(e.currentTarget.value);var n=t(e.currentTarget.getAttribute("data-target")),a="/quilts/update/"+n.data("id")+"/type/",i={type:e.currentTarget.value};t.ajax(a,{type:"patch",data:i,statusCode:{200:function(){},400:function(){alert("not updated")}}})}function o(e){var n=t(e.currentTarget),a=e.currentTarget.value,i=e.currentTarget.getAttribute("data-id"),r=c.attr("action")+"/"+i,u={title:a};t.ajax(r,{type:"post",data:u,statusCode:{200:function(){n.next(".view-link").html(a)},400:function(){alert("not updated")}}})}var c=t("#quilts-form"),d=c.find(".edit-action"),l=c.find(".delete-action"),f=c.find(".type-select"),g=c.find("#delete-modal");return{init:function(){e()},deinit:function(){}}}(jQuery);