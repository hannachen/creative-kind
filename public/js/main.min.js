"use strict";!function(e,t){t.mobileMq="screen and (min-width: 48em)";var i={init:function(){this.initVariables(),this.initEvents(),this.initPage()},initVariables:function(){this.$flashMsg=e("#flash-modal"),this.$drawerNav=e("#account-drawer, #submenu-drawer")},initEvents:function(){this.$drawerNav.on("show.bs.drawer",this.onDrawerOpen),this.$drawerNav.on("hidden.bs.drawer",this.onDrawerClose)},initPage:function(){var t=document.location.toString();t.match("#")&&e('.nav-pills a[href="#'+t.split("#")[1]+'"]').tab("show"),console.log("flash",_.isEmpty(this.$flashMsg.find(".modal-body").text().trim())),_.isEmpty(this.$flashMsg.find(".modal-body").text().trim())||this.$flashMsg.modal("show")},onDrawerOpen:function(t){var i=e("body"),n=e(t.target),a=i.find(".overlay");a.length||(a=e('<div class="overlay"></div>'),a.on("click",function(){n.find(".drawer-toggle").trigger("click")}),a.appendTo(i))},onDrawerClose:function(){e(".overlay").remove()}};e(function(){i.init()})}(jQuery,window);var Quilt=function(e,t,i){function n(e,t,i){this.$patchPreview=$("#patch-preview"),this.quiltId=t,this.myPatch="",this.patches=[],this.clickedPatch,this.patchStatus,this.setupQuilt(e,i)}return console.log("NEW"),n.prototype.disable=function(){var e=this;_.forEach(this.patches,function(t){t.off(e.getPatchEvents())})},n.prototype.setupQuilt=function(e,t){var i=this;_.forEach(t,function(e){"mine"===e.status&&(i.myPatch=e.uid)}),e.hasChildren()&&!function(){var n=e.children,a=0;console.log("LENGTH",n.length),_.forEach(n,function(e,n){if(void 0===e||void 0===e.hasChildren()||!t[n-a])return a++,void console.log("SKIP",e);var o=void 0,s=void 0,r=void 0;switch(e.hasChildren()&&_.forEach(e.children,function(e){var t=i.getItemType(e);switch(t){case"rectangle":o=e;break;case"path":s=e;break;case"circle":r=e}}),s.locked=!0,s.visible=!1,r.locked=!0,r.visible=!1,o.strokeScaling=!1,o.fillColor="#ffffff",o.data.uid=t[n-a].uid,o.data.status=t[n-a].status,o.data.status){case"progress":o.fillColor="#cccccc";break;case"mine":o.on(i.getPatchEvents()),o.fillColor="#aab0ff";break;case"complete":project.importSVG("/patch/svg/"+o.data.uid,function(t){t.rotate(-45),t.fitBounds(o.bounds),t.data=o.data,e.addChild(t),t.on(i.getPatchEvents()),o.visible=!1});break;case"new":default:i.myPatch.length?s.visible=!1:(o.on(i.getPatchEvents()),s.visible=!0)}i.patches.push(o)})}()},n.prototype.getItemType=function(e){var t="";switch(e.className){case"Shape":t=e.type;break;case"Path":t=e.className.toLowerCase()}return t},n.prototype.getPatchEvents=function(){var e=this,t={};return t.click=function(t){var i=t.target.data;i.quilt=e.quiltId,console.log(e.quiltId),e.clickedPatch=i,"complete"===i.status?e.showPatch(i.uid):e.emitClickEvent(i)},Modernizr.touch||(t.mouseenter=e.enterArea,t.mouseleave=e.leaveArea),t},n.prototype.emitClickEvent=function(e){$(document).trigger({type:"click-patch",patch:e})},n.prototype.showPatch=function(e){var t=this;this.$patchPreview.css("display","block");var i=$('<img src="/patch/svg/'+e+'">');i.on("click",function(){i.off("click"),t.$patchPreview.css("display","none"),t.$patchPreview.empty()}),this.$patchPreview.append(i)},n.prototype.enterArea=function(e){e.target.opacity=.75},n.prototype.leaveArea=function(e){e.target.opacity=1,this.dragging=!1},n}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},utils=function(e,t){return{serializeArray:function(e){var t,i,n=[];if("object"==("undefined"==typeof e?"undefined":_typeof(e))&&"FORM"==e.nodeName)for(var a=e.elements.length,o=0;o<a;o++)if(t=e.elements[o],t.name&&!t.disabled&&"file"!=t.type&&"reset"!=t.type&&"submit"!=t.type&&"button"!=t.type)if("select-multiple"==t.type)for(i=e.elements[o].options.length,j=0;j<i;j++)t.options[j].selected&&(n[n.length]={name:t.name,value:t.options[j].value});else if("checkbox"!=t.type&&"radio"!=t.type||t.checked){var s={};s[t.name]=t.value,n[n.length]=s}return n},seralizeObject:function(e){var t,i,n={};if("object"==("undefined"==typeof e?"undefined":_typeof(e))&&"FORM"==e.nodeName)for(var a=e.elements.length,o=0;o<a;o++)if(t=e.elements[o],t.name&&!t.disabled&&"file"!=t.type&&"reset"!=t.type&&"submit"!=t.type&&"button"!=t.type)if("select-multiple"==t.type){i=e.elements[o].options.length;var s=[];for(j=0;j<i;j++){if(t.options[j].selected)var r={name:t.name,value:t.options[j].value};s.push(r)}n[t.name]=s}else("checkbox"!=t.type&&"radio"!=t.type||t.checked)&&(n[t.name]=t.value);return n},breakpoint:function(e){return t.matchMedia(e).matches?"desktop":"mobile"},debounce:function(e,t,i){var n;return function(){var a=this,o=arguments,s=function(){n=null,i||e.apply(a,o)},r=i&&!n;clearTimeout(n),n=setTimeout(s,t),r&&e.apply(a,o)}}}}(jQuery,window);
//# sourceMappingURL=maps/main.min.js.map
