"use strict";!function(e,t){t.mobileMq="screen and (min-width: 48em)";var i={init:function(){this.initVariables(),this.initEvents(),this.initPage()},initVariables:function(){this.$flashMsg=e("#flash-modal"),this.$drawerNav=e("#account-drawer, #submenu-drawer")},initEvents:function(){this.$drawerNav.on("show.bs.drawer",this.onDrawerOpen),this.$drawerNav.on("hidden.bs.drawer",this.onDrawerClose)},initPage:function(){var t=document.location.toString();t.match("#")&&e('.nav-pills a[href="#'+t.split("#")[1]+'"]').tab("show"),console.log("flash",_.isEmpty(this.$flashMsg.find(".modal-body").text().trim())),_.isEmpty(this.$flashMsg.find(".modal-body").text().trim())||this.$flashMsg.modal("show")},onDrawerOpen:function(t){var i=e("body"),a=e(t.target),n=i.find(".overlay");n.length||(n=e('<div class="overlay"></div>'),n.on("click",function(){a.find(".drawer-toggle").trigger("click")}),n.appendTo(i))},onDrawerClose:function(){e(".overlay").remove()}};e(function(){i.init()})}(jQuery,window);var Quilt=function(e,t,i){this.$patchPreview=$("#patch-preview"),this.quiltId=t,this.myPatch="",this.patches=[],this.clickedPatch,this.patchStatus,this.setupQuilt(e,i)};Quilt.prototype={disable:function(){var e=this;_.forEach(this.patches,function(t){t.off(e.getPatchEvents())})},setupQuilt:function(e,t){var i=this;_.forEach(t,function(e){"mine"===e.status&&(i.myPatch=e.uid)}),e.hasChildren()&&!function(){var a=e.children,n=0;console.log("LENGTH",a.length),_.forEach(a,function(e,a){if(void 0===e||void 0===e.hasChildren()||!t[a-n])return n++,void console.log("SKIP",e);var o=void 0,s=void 0,c=void 0;switch(e.hasChildren()&&_.forEach(e.children,function(e){var t=i.getItemType(e);switch(t){case"rectangle":o=e;break;case"path":s=e;break;case"circle":c=e}}),s.locked=!0,s.visible=!1,c.locked=!0,c.visible=!1,o.strokeScaling=!1,o.fillColor="#ffffff",o.data.uid=t[a-n].uid,o.data.status=t[a-n].status,o.data.status){case"progress":o.fillColor="#cccccc";break;case"mine":o.on(i.getPatchEvents()),o.fillColor="#aab0ff";break;case"complete":project.importSVG("/patch/svg/"+o.data.uid,function(t){t.rotate(-45),t.fitBounds(o.bounds),t.data=o.data,e.addChild(t),t.on(i.getPatchEvents()),o.visible=!1});break;case"new":default:i.myPatch.length?s.visible=!1:(o.on(i.getPatchEvents()),s.visible=!0)}i.patches.push(o)})}()},getItemType:function(e){var t="";switch(e.className){case"Shape":t=e.type;break;case"Path":t=e.className.toLowerCase()}return t},getPatchEvents:function(){var e=this,t={};return t.click=function(t){var i=t.target.data;i.quilt=e.quiltId,console.log(e.quiltId),e.clickedPatch=i,"complete"===i.status?e.showPatch(i.uid):e.emitClickEvent(i)},Modernizr.touch||(t.mouseenter=e.enterArea,t.mouseleave=e.leaveArea),t},emitClickEvent:function(e){$(document).trigger({type:"click-patch",patch:e})},showPatch:function(e){var t=this;this.$patchPreview.css("display","block");var i=$('<img src="/patch/svg/'+e+'">');i.on("click",function(){i.off("click"),t.$patchPreview.css("display","none"),t.$patchPreview.empty()}),this.$patchPreview.append(i)},enterArea:function(e){e.target.opacity=.75},leaveArea:function(e){e.target.opacity=1,this.dragging=!1}};var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},utils=function(e,t){return{serializeArray:function(e){var t,i,a=[];if("object"==("undefined"==typeof e?"undefined":_typeof(e))&&"FORM"==e.nodeName)for(var n=e.elements.length,o=0;o<n;o++)if(t=e.elements[o],t.name&&!t.disabled&&"file"!=t.type&&"reset"!=t.type&&"submit"!=t.type&&"button"!=t.type)if("select-multiple"==t.type)for(i=e.elements[o].options.length,j=0;j<i;j++)t.options[j].selected&&(a[a.length]={name:t.name,value:t.options[j].value});else if("checkbox"!=t.type&&"radio"!=t.type||t.checked){var s={};s[t.name]=t.value,a[a.length]=s}return a},seralizeObject:function(e){var t,i,a={};if("object"==("undefined"==typeof e?"undefined":_typeof(e))&&"FORM"==e.nodeName)for(var n=e.elements.length,o=0;o<n;o++)if(t=e.elements[o],t.name&&!t.disabled&&"file"!=t.type&&"reset"!=t.type&&"submit"!=t.type&&"button"!=t.type)if("select-multiple"==t.type){i=e.elements[o].options.length;var s=[];for(j=0;j<i;j++){if(t.options[j].selected)var c={name:t.name,value:t.options[j].value};s.push(c)}a[t.name]=s}else("checkbox"!=t.type&&"radio"!=t.type||t.checked)&&(a[t.name]=t.value);return a},breakpoint:function(e){return t.matchMedia(e).matches?"desktop":"mobile"},debounce:function(e,t,i){var a;return function(){var n=this,o=arguments,s=function(){a=null,i||e.apply(n,o)},c=i&&!a;clearTimeout(a),a=setTimeout(s,t),c&&e.apply(n,o)}},validateEmail:function(e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)}}}(jQuery,window);
//# sourceMappingURL=maps/main.min.js.map
